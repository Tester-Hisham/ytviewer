<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>YouTube</title>
<style>
:root {
  --bg: #0f1115;
  --panel: #161a22;
  --panel-2: #1c2230;
  --text: #f5f7fb;
  --muted: #a7b0c0;
  --brand: #ff33cc;
  --radius: 22px;
  --shadow: 0 25px 60px rgba(0, 0, 0, .7);
}
[data-theme="light"] {
  --bg: #f2f2f2;
  --panel: #ffffff;
  --panel-2: #ededed;
  --text: #222;
  --muted: #666;
  --brand: #ff33cc;
}
* { box-sizing: border-box }
html, body { height: 100%; margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif; transition: all 0.3s; overflow: hidden; }
body { 
  background: linear-gradient(180deg, var(--bg), #0b0d12);
  color: var(--text);
}

/* === Glowing blob background (static, no reacts) === */
#blobs {
  position: fixed; 
  inset: 0;
  z-index: 0;      
  pointer-events: none;
  overflow: hidden;
}
.blob {
  position: absolute;
  width: 42vmax;
  height: 42vmax;
  border-radius: 50%;
  background: radial-gradient(circle at 50% 50%, rgba(255, 51, 204, 0.60), rgba(255, 51, 204, 0.25) 30%, transparent 70%);
  filter: blur(80px);
  transform: translate3d(0,0,0) scale(1);
  will-change: transform, background;
}

/* App UI */
.app { position: relative; z-index: 1; display: grid; grid-template-rows: auto 1fr; gap: 20px; max-width: 1300px; margin: 0 auto; padding: 20px; }
.bar { 
  display: grid; 
  grid-template-columns: 1fr repeat(12, auto); 
  gap: 12px; 
  align-items: center; 
  background: var(--panel); 
  padding: 16px; 
  border-radius: var(--radius); 
  box-shadow: var(--shadow); 
  backdrop-filter: blur(30px); 
}
.input { display: flex; gap: 12px; align-items: center; background: var(--panel-2); border: 1px solid rgba(255,255,255,.08); padding: 12px 16px; border-radius: 20px; backdrop-filter: blur(35px); }
.input input { flex: 1; border: 0; outline: none; background: transparent; color: var(--text); font-size: 16px; }
.btn { border: 0; border-radius: 20px; padding: 12px 18px; background: var(--brand); color: #fff; font-weight: 700; cursor: pointer; transition: all 0.3s; }
.btn.ghost { background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,.12); }
.btn:hover { transform: translateY(-1px) scale(1.05); box-shadow: 0 20px 60px rgba(255, 51, 204, .6); }
select { border-radius: 12px; padding: 6px 12px; background: var(--panel-2); color: var(--text); border:1px solid rgba(255,255,255,.08); }

.grid { display: grid; grid-template-columns: 3fr auto; gap: 20px; height: calc(100vh - 180px); transition: all 0.4s; }
.player { background: #000; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); position: relative; backdrop-filter: blur(25px); transition: all 0.5s; }
.player .placeholder { position: absolute; inset:0; display: grid; place-items: center; color: #8891a4; font-size: 20px; transition: opacity 0.5s; }
.list { background: var(--panel); border-radius: var(--radius); box-shadow: var(--shadow); display: flex; flex-direction: column; min-height: 0; backdrop-filter: blur(30px); width: 320px; transition: width 0.4s ease, opacity 0.3s ease; }
.list-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,.06); }
.items { overflow: auto; padding: 12px; transition: opacity 0.3s; flex:1; }
.item { display: grid; grid-template-columns: 140px 1fr auto; gap: 12px; align-items: center; padding: 12px; border-radius: 16px; cursor: grab; transition:0.25s; }
.item:hover { background: rgba(255,255,255,.06); }
.item.active { background: rgba(255,51,204,.25); }
.item.dragging { opacity:0.4; background: rgba(255,255,255,.1); }
.thumb { width:140px; height:80px; border-radius:16px; object-fit:cover; background:#0a0c12; }
.title { font-weight:700; line-height:1.3; font-size:15px; }
.meta { font-size:12px; color: var(--muted); }
.x { opacity:.8; border:0; background:transparent; color:var(--muted); cursor:pointer; font-size:20px; transition:0.2s; }
.x:hover { opacity:1; transform:scale(1.1); }
.list.minimized { width:0 !important; opacity:0; pointer-events:none; }
#toastContainer { position: fixed; top: 20px; right: 20px; z-index: 10; display: flex; flex-direction: column; align-items: flex-end; }

@media (max-width:1024px){
  .grid { grid-template-columns:1fr; grid-template-rows:1fr 320px; height:auto; }
  .list { min-height:320px; width:100%; }
}
</style>
</head>
<body data-theme="dark">

<!-- Glowing Background (static) -->
<div id="blobs">
  <div class="blob" style="top:-10%; left:-10%"></div>
  <div class="blob" style="top:20%; right:-15%"></div>
  <div class="blob" style="bottom:-15%; left:10%"></div>
</div>

<div class="app">
  <div class="bar">
    <div class="input"><input id="url" placeholder="Paste YouTube URL or video ID" /></div>
    <button class="btn" id="addBtn">Add</button>
    <button class="btn ghost" id="pasteBtn">ðŸ“‹ Paste</button>
    <button class="btn ghost" id="prevBtn">âŸ¨ Prev</button>
    <button class="btn ghost" id="nextBtn">Next âŸ©</button>
    <button class="btn ghost" id="minBtn">â‡”</button>
    <select id="playlistSelect"></select>
    <button class="btn ghost" id="newPlaylistBtn">New</button>
    <button class="btn ghost" id="deletePlaylistBtn">Delete</button>
    <button class="btn ghost" id="themeBtn">ðŸŒ—</button>
  </div>

  <div class="grid">
    <section class="player">
      <div id="player"></div>
      <div class="placeholder" id="placeholder">Add a video to start â–¶</div>
    </section>

    <aside class="list" id="playlist">
      <div class="list-header">
        <div style="font-weight:700">Playlist</div>
        <div class="actions">
          <button class="btn ghost" id="shuffleBtn">Shuffle</button>
          <button class="btn ghost" id="clearBtn">Clear</button>
        </div>
      </div>
      <div class="items" id="items"></div>
    </aside>
  </div>
</div>
<div id="toastContainer"></div>

<script>
// ====== Dark / Light Mode Toggle ======
document.getElementById('themeBtn').onclick = () => {
  if(document.body.dataset.theme==="dark") document.body.dataset.theme="light";
  else document.body.dataset.theme="dark";
  localStorage.setItem('theme', document.body.dataset.theme);
}
const savedTheme = localStorage.getItem('theme');
if(savedTheme) document.body.dataset.theme = savedTheme;

// ====== Blobs Animation (static, slow float) ======
const blobs = [...document.querySelectorAll('.blob')];
function animateBlobs(){
  requestAnimationFrame(animateBlobs);
  const t = performance.now()*0.0005;
  blobs.forEach((b,i)=>{
    const x = Math.sin(t+i)*20;
    const y = Math.cos(t+i*1.1)*20;
    b.style.transform=`translate3d(${x}px,${y}px,0)`;
  });
}
animateBlobs();

// ======= YouTube Player + Playlist =======
const state={playlists:{"Default":[]},currentPlaylist:"Default",idx:-1};
const itemsEl=document.getElementById('items');
const urlEl=document.getElementById('url');
const placeholder=document.getElementById('placeholder');
const playlistEl=document.getElementById('playlist');

function ensurePlayer(id,start=0){
  if(!window.YT){ const tag=document.createElement('script'); tag.src="https://www.youtube.com/iframe_api"; document.body.appendChild(tag); }
  window.onYouTubeIframeAPIReady=function(){ 
    player=new YT.Player('player',{height:'100%', width:'100%', videoId:id, playerVars:{ autoplay:1, start:start }});
  }
  if(window.YT && YT.Player) {
    player=new YT.Player('player',{height:'100%', width:'100%', videoId:id, playerVars:{ autoplay:1, start:start }});
  }
}

function playAt(i){ 
  const list = state.playlists[state.currentPlaylist]; 
  if(!list[i]) return;
  state.idx = i;
  const v = list[i];
  if(window.player && player.destroy) player.destroy();
  ensurePlayer(v.id, v.start || 0);
  placeholder.style.display = 'none';
  renderList(); 
}

function renderList(){
  const list = state.playlists[state.currentPlaylist];
  itemsEl.innerHTML='';
  list.forEach((v,i)=>{
    const div=document.createElement('div');
    div.className='item'+(i===state.idx?' active':'');
    div.innerHTML=`<img class="thumb" src="${v.thumb||''}"><div class="title">${v.title||v.id}</div><button class="x">&times;</button>`;
    div.querySelector('.x').onclick=()=>{ list.splice(i,1); renderList(); };
    div.onclick=()=>playAt(i);
    itemsEl.appendChild(div);
  });
}

document.getElementById('addBtn').onclick=()=>{
  const val=urlEl.value.trim();
  if(!val) return;
  const id = val.split('v=')[1]||val; 
  state.playlists[state.currentPlaylist].push({id});
  renderList();
  urlEl.value='';
};

document.getElementById('prevBtn').onclick=()=>{ const i=Math.max(state.idx-1,0); playAt(i); };
document.getElementById('nextBtn').onclick=()=>{ const i=Math.min(state.idx+1,state.playlists[state.currentPlaylist].length-1); playAt(i); };
document.getElementById('minBtn').onclick=()=>{ playlistEl.classList.toggle('minimized'); };

// Initial render
renderList();
if(state.idx>=0) playAt(state.idx);
</script>
</body>
</html>
